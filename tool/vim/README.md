# Vim
VimとしているがVi, VSCode Vim, NeoVimなど関係なく書いている

## 起動コマンド
* ファイルを指定して起動 - `vi {ファイル名}`
* 読み取り専用で起動 - `view {ファイル名}` or `vi -R {ファイル名}`

## エディタチートシート
### カット
* 1文字カット - `x`
* 選択範囲をカット - `d`
* 行をカット - `dd`
* 3行カット - `3dd`
* 2~4行目をカット - `:2,4d`
* 現在行から最終行目をカット - `:.,$d`
* 全体をカット - `:%d`
* 単語をカット - `diw`
* 対応する括弧までカット - `di(`
* `{char}`までカット - `df{char}`

### コピー
* 選択範囲をコピー - `y`
* 行をコピー - `yy`
* 3行コピー - `3yy`
* 2~4行目をコピー - `:2,4y`
* 現在行から最終行目をコピー - `:.,$y`
* 全体をコピー - `:%y`
* 単語をコピー - `yiw`
* 対応する括弧までコピー - `yi(`
* `{char}`までコピー - `yf{char}`

### 削除してインサートモード
* 選択範囲を削除してインサートモードへ変更 - `c`
* 行を削除してインサートモードへ変更 - `cc`
* 3行削除してインサートモードへ変更 - `3cc`
* 単語を削除してインサートモードへ変更 - `ciw`
* 対応する括弧まで削除してインサートモードへ変更 - `ci(`
* `{char}`まで削除してインサートモードへ変更 - `cf{char}`
* 次の検索結果を削除してインサートモードへ変更 - `cgn`

### ペースト
* ペースト - `p`

### パターンマッチング
* 下へ - `/pattern`
* 上へ - `?pattern`
* カーソル以下の単語で検索 - `*`
* 次の結果へ - `n`
* 前の結果へ - `N`
* 次の結果を選択 - `gn`
* 前の結果を選択 - `gN`
* `{char}` までジャンプ - `f{char}`
    * `F`で逆方向にジャンプ
    * `;` で次の `{char}` へジャンプ
    * `,` で前の `{char}` へジャンプ
* grep - `:grep pattern file`

### 置換
* 1文字置換 - `r{char}`
* 置換 - `:%s/{before}/{after}/g`
    * `g`は行内のすべてを置換、なければ先頭のみ
* 検索文字列をカウント - `:%s/{pattern}//gn`
* 確認しながら置換 - `:%s/{before}/{after}/gc`
* キャプチャグループを使った置換 - `:%s/\(hoge\)/\1fuga/g`
    * `\(hoge\)`でhogeをキャプチャし、`\1`で再利用することで、hogeがhogefugaになる
* 検索文字列を置換 - `/{before}<CR>cgn{after}`
    * `:s`と違いvimのモーションやドットリピートを活用できる
* カーソル配下の文字を置換 - `*Ncgn{after}`
    * `:s`と違いvimのモーションやドットリピートを活用できる
* 大文字に変更 - `gU`
* 小文字に変更 - `gu`

### スクロール
* 下へ - `<C-e>`
* 上へ - `<C-y>`
* 画面半分下へ - `<C-d>`
* 画面半分上へ - `<C-u>`

### カーソル移動
* 左 - `h` 
* 下 - `j`
* 上 - `k`
* 右 - `l`
* 行先頭 - `0`
* 行末尾 - `$`
* 次の単語の先頭 - `w`
* 前の単語の先頭 - `b`
* 画面中央へ - `M`
* 前の段落へ - `{`
* 次の段落へ - `}`

### 行移動
* 1行目へ - `gg`
* 3行目へ - `3gg`
* 最後の行へ - `G`
* 3行下へ - `3j`
* 3行上へ - `3k`

### 相対行指定
* 現在行から+3行目 - `:+3`
* 現在行から-2行目 - `:-2`

### ジャンプ
* 1つ前のジャンプ位置に戻る - `<C-o>`
* 1つ先のジャンプ位置に戻る - `<C-i>`
* 定義にジャンプ - `gd`
* ファイルをジャンプして開く - `gf`
* マウスをホバー（おそらくVSCode Vim特有） - `gh`

### モード切替
* ノーマルモード - `Esc`
* コマンドモード - `:`
* ターミナルモードからノーマルモードへ - `<C-\><C-n>`

### コマンドラインモード
* コマンドラインモードを開く - `:`後に`<C-f>`
* コマンドラインモードでコマンドを実行 - `<CR>`
* ノーマルモードへ戻る - `<C-c>`

### インサートモード
* カーソルの前から - `i`
* カーソルの後から - `a`
* 行先頭から - `I`
* 行末尾から - `A`
* 前に1行追加してから - `O`
* 次に1行追加してから - `o`

### ビジュアルモード
* ビジュアルモード - `v`
* 行ビジュアルモード - `V`
* 短形ビジュアルモード - `<C-v>`
* 単語を選択 - `viw`
* 対応する括弧まで選択 - `vi(`
* `{char}`まで選択 - `vf{char}`
* 選択範囲を指定 - `:'<,'>`
* 直前の選択範囲を再選択 - `gv`
* 選択範囲のカーソル位置を反対側に移動 - `o`

### インデント
* インデントを下げる - `>>`
* 2~4行目のインデントを3つ下げる - `:2,5>>>`
* インデントを上げる - `<<`
* 2~4行目のインデントを3つ上げる - `:2,5<<<`

### テキスト整形
* テキストを左寄せ - `:left`
    * 例：`:5,10left`で5~10行目を左寄せ
* テキストを中央寄せ - `:center`
    * 例：`:center`で現在行を中央寄せ
* テキストを右寄せ - `:right`
    * 例：`:'<,'>right`で選択範囲を右寄せ

### 範囲指定
* 範囲を指定してコマンドを実行 - `:{range}`
    * `{range}`の例：
        * `:5` - 5行目
        * `:5,10` - 5~10行目
        * `:.` - 現在行
        * `:$` - 最終行
        * `:%` - 全体
        * `:'<,'>` - 選択範囲
    * 範囲指定後に`d`(削除)、`y`(コピー)、`>`(インデント)などを続けて実行可能
* 範囲指定して外部コマンドでフィルタ - `:{range}!{command}`
    * 例：`:'<,'>!sort`で選択範囲をソート
    * 例：`:%!jq .`でファイル全体をjqで整形

### インクリメント／デクリメント
* インクリメント - `C-a`
* デクリメント - `C-x`
* 選択範囲の数値を連番でインクリメント - `g<C-a>`
    * 例：複数行の`1`を選択して`g<C-a>`を実行すると`1, 2, 3, ...`になる

### undo・redo
* undo - `u`
* redo - `<C-r>`

### レジスタ
* レジスタ0の内容を挿入 - `<C-r>0`
    * レジスタ0には直前にヤンクした内容が自動的に保存される
* 現在のバッファのファイルパスを挿入 - `<C-r>%`
* 一つ前のバッファのファイルパスを挿入 - `<C-r>#`

### ファイル操作
* 保存 - `:w`
* 別名で保存 - `:w {ファイル名}`
* 選択範囲を別名で保存 - `:'<,'>w {ファイル名}`
* 別のファイルをカーソル位置に挿入 - `:r {ファイル名}`
* 強制終了 - `:q!`
* すべて強制終了 - `:qall!`
* 保存して終了 - `:wq`
* ファイルを開く - `:e {ファイル名}`
* 新しい無名バッファを開く - `:enew`
* エンコーディングを指定してファイルを再読み込み - `:e ++enc=utf-8 %`
    * `utf-8`の部分を`sjis`などに変更することで、異なるエンコーディングで開き直せる
* 改行コードを指定してファイルを再読み込み - `:e ++ff=unix %`
    * `unix`の部分を`dos`などに変更することで、異なる改行コードで開き直せる

### ウィンドウ操作
* 左右に分割 - `:vs`
* ウィンドウを閉じる - `<C-w>q`
* 左のウィンドウへフォーカスを移動 - `<C-w>h`
* 下のウィンドウへフォーカスを移動 - `<C-w>j`
* 上のウィンドウへフォーカスを移動 - `<C-w>k`
* 右のウィンドウへフォーカスを移動 - `<C-w>l`

### バッファ操作
* バッファ一覧 - `:ls`
* 次のバッファに移動 - `:bn`
* 前のバッファに移動 - `:bp`
* 指定のバッファに移動 - `:b (ファイル名)`
    * タブ補完が効く

### マクロ
* マクロ記録開始（aレジスタに記録） - `qa`
* マクロ記録終了 - `q`
* マクロ実行（aレジスタのマクロを実行） - `@a`
* 直前のマクロを再実行 - `@@`
* マクロを10回実行 - `10@a`

### 折りたたみ
* 折りたたみを作成 - `zf`
* 折りたたみを削除 - `zd`
* 折りたたみを開閉 - `za`

### 設定
* ハイライト解除 - `:noh`
* 大文字小文字を無視する - `:set ignorecase`
* クリップボードをOSと共有する - `:set clipboard=unnamed`

### その他
* 外部コマンドを実行 - `:!{command}`
* （非互換モード）コマンド入力時のコマンドの補完 - `<TAB>`
* （非互換モード）コマンド入力時のファイル名の補完 - `<C-d>`
* 直前の変更を繰り返す - `.`
* メッセージを表示 - `:messages`
    * `vim.notify()`がデフォルトで書き込む場所

# 使わなくなったコマンド
<details><summary>クリックで展開</summary>

## 起動コマンド
* ファイルを複数指定して起動 - `vi -p {ファイル名を空白区切り}`

## エディタチートシート
### カット
* 空白区切りでカット - `diW`
* `{char}`の1文字手前までカット - `dt{char}`

### コピー
* 空白区切りでコピー - `yiW`
* `{char}`の1文字手前までコピー - `yt{char}`

### 削除してインサートモード
* `{char}`の1文字手前まで削除してインサートモードへ変更 - `ct{char}`

### カーソル移動
* 次へ空白区切りでジャンプ - `W`
* 前へ空白区切りでジャンプ - `B`

### タブ操作
* 別タブでファイルを開く - `:tabe {ファイル名}`
* タブを閉じる - `:tabc`
* このタブ以外を閉じる - `:tabo`
* 次のタブへ移動する - `gt`
* 前のタブへ移動する - `gT`

### ウィンドウ操作
* 上下に分割 - `:sp`

### バッファ操作
* n番目のバッファに移動 - `:b n`
* n番目のバッファを削除 - `:bd n`

</details>
